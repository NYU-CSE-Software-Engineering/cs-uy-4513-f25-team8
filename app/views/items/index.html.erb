<h1>Marketplace</h1>

<!-- ========================= -->
<!-- SEARCH BAR â€” stays at top -->
<!-- ========================= -->
<div style="margin-bottom: 25px; padding: 10px; background: #f7f7f7; border-radius: 8px;">
  <%= form_with url: items_path, method: :get, local: true do |f| %>

    <div style="margin-bottom: 10px;">
      <%= f.label :keyword, "Search Items" %><br>
      <%= f.text_field :keyword, value: params[:keyword], style: "width: 100%; padding: 8px;" %>
    </div>

    <div style="display: flex; gap: 10px;">
      <div>
        <%= f.label :category %><br>
        <%= f.select :category, ["Electronics", "Clothing", "Furniture", "Tools"],
                     include_blank: "Any",
                     selected: params[:category] %>
      </div>

      <div>
        <%= f.label :availability, "Available only" %><br>
        <%= f.select :availability, [["Available", "available"], ["Unavailable", "unavailable"]],
                     include_blank: "Any",
                     selected: params[:availability] %>
      </div>
    </div>

    <div style="margin-top: 10px;">
      <%= f.submit "Search", style: "padding: 8px 15px; background: #4CAF50; color: white; border: none; border-radius: 5px;" %>
    </div>

  <% end %>
</div>



<!-- ========================= -->
<!-- ITEM LISTINGS -->
<!-- ========================= -->

<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
  <% @items.each do |item| %>
    <div style="border: 1px solid #ddd; padding: 15px; border-radius: 8px; background: white;">

      <!-- TITLE -->
      <h3><%= link_to item.title, item_path(item) %></h3>

      <!-- IMAGE -->
      <% if item.image.attached? %>
        <%= image_tag item.image, style: "width: 100%; height: 180px; object-fit: cover; border-radius: 5px;" %>
      <% end %>

      <!-- PRICE -->
      <p style="margin-top: 10px;">
        <strong><%= number_to_currency(item.price) %> per day</strong>
      </p>

      <!-- OWNER -->
      <p><strong>Owner:</strong> <%= item.owner.email %></p>

      <!-- AVAILABILITY -->
      <p><strong>Available:</strong> <%= item.availability_status %></p>

      <!-- BUTTON -->
      <%= link_to "See More", item_path(item),
                  style: "display: inline-block; width: 100%; text-align: center; padding: 8px; background: #4CAF50; color: white; border-radius: 5px; margin-top: 10px;" %>
    </div>
  <% end %>
</div>
