<div class="row mb-4">
  <div class="col-12">
    <h1 class="display-5 fw-bold mb-2">
      <i class="bi bi-people me-2 text-primary"></i>User Management Dashboard
    </h1>
    <p class="text-muted">Manage users, view account status, and handle reports</p>
  </div>
</div>

<!-- Quick Links -->
<div class="row mb-4">
  <div class="col-md-6">
    <div class="card border-0 shadow-sm">
      <div class="card-body">
        <div class="d-flex align-items-center">
          <div class="flex-shrink-0">
            <div class="bg-info bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
              <i class="bi bi-envelope text-info fs-4"></i>
            </div>
          </div>
          <div class="flex-grow-1 ms-3">
            <h6 class="mb-0 fw-bold">Contact Messages</h6>
            <p class="text-muted mb-0 small">View user feedback and inquiries</p>
          </div>
          <div>
            <%= link_to admin_contacts_path, class: "btn btn-sm btn-outline-info" do %>
              <i class="bi bi-arrow-right"></i>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Search Form -->
<div class="card shadow-sm mb-4">
  <div class="card-body">
    <%= form_with url: admin_users_path, method: :get, local: true, class: "row g-3" do |f| %>
      <div class="col-md-10">
        <%= f.label :search, "Search by username or email", class: "form-label fw-semibold" %>
        <%= f.text_field :search, value: params[:search], class: "form-control form-control-lg", placeholder: "Enter username or email..." %>
      </div>
      <div class="col-md-2 d-flex align-items-end">
        <%= f.submit "Search", class: "btn btn-primary btn-lg w-100" %>
      </div>
    <% end %>
  </div>
</div>

<!-- Users Table -->
<% if @users.any? %>
  <div class="card shadow-sm border-0">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th scope="col">Username</th>
              <th scope="col">Email</th>
              <th scope="col">Role</th>
              <th scope="col">Account Status</th>
              <th scope="col" class="text-center">Report Count</th>
              <th scope="col" class="text-end">Actions</th>
            </tr>
          </thead>
          <tbody>
            <% @users.each do |user| %>
              <tr>
                <td>
                  <strong><%= user.username %></strong>
                </td>
                <td>
                  <small class="text-muted"><%= user.email %></small>
                </td>
                <td>
                  <span class="badge bg-<%= user.role == 'admin' ? 'danger' : user.role == 'owner' ? 'info' : 'success' %>">
                    <%= user.role.capitalize %>
                  </span>
                </td>
                <td>
                  <span class="badge bg-<%= user.account_status == 'active' ? 'success' : 'secondary' %>">
                    <i class="bi bi-<%= user.account_status == 'active' ? 'check-circle' : 'x-circle' %> me-1"></i>
                    <%= user.account_status.capitalize %>
                  </span>
                </td>
                <td class="text-center">
                  <% if user.report_count > 0 %>
                    <span class="badge bg-warning text-dark">
                      <i class="bi bi-flag me-1"></i><%= user.report_count %>
                    </span>
                  <% else %>
                    <span class="text-muted">0</span>
                  <% end %>
                </td>
                <td class="text-end">
                  <%= link_to admin_user_path(user), class: "btn btn-sm btn-outline-primary" do %>
                    <i class="bi bi-eye me-1"></i>View Details
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
<% else %>
  <div class="card shadow-sm border-0">
    <div class="card-body text-center py-5">
      <i class="bi bi-inbox display-1 text-muted mb-3"></i>
      <h4 class="text-muted">No users found</h4>
      <p class="text-muted">Try adjusting your search criteria.</p>
    </div>
  </div>
<% end %>

