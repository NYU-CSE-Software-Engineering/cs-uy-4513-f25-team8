<% provide :title, "Contact Message" %>

<div class="row mb-4">
  <div class="col-12">
    <h1 class="display-5 fw-bold mb-2">
      <i class="bi bi-envelope me-2 text-primary"></i>Contact Message
    </h1>
  </div>
</div>

<div class="row">
  <div class="col-lg-8">
    <div class="card shadow-sm border-0">
      <div class="card-header bg-white border-bottom">
        <div class="d-flex justify-content-between align-items-center">
          <h5 class="mb-0 fw-bold"><%= @contact.subject %></h5>
          <span class="badge bg-<%= @contact.user ? 'info' : 'secondary' %>">
            <%= @contact.user ? "Registered User" : "Guest" %>
          </span>
        </div>
      </div>
      <div class="card-body">
        <div class="mb-4">
          <h6 class="text-muted mb-2">From:</h6>
          <p class="mb-1"><strong><%= @contact.name %></strong></p>
          <p class="text-muted mb-0"><%= @contact.email %></p>
          <% if @contact.user %>
            <p class="text-muted small mt-2">
              <i class="bi bi-person me-1"></i>User: <%= link_to @contact.user.username, admin_user_path(@contact.user), class: "text-decoration-none" %>
            </p>
          <% end %>
        </div>

        <hr>

        <div class="mb-3">
          <h6 class="text-muted mb-2">Message:</h6>
          <div class="bg-light p-3 rounded">
            <%= simple_format(@contact.message) %>
          </div>
        </div>

        <div class="text-muted small">
          <i class="bi bi-clock me-1"></i>Received: <%= @contact.created_at.strftime("%B %d, %Y at %I:%M %p") %>
        </div>
      </div>
      <div class="card-footer bg-white border-top">
        <%= link_to admin_contacts_path, class: "btn btn-outline-secondary" do %>
          <i class="bi bi-arrow-left me-1"></i>Back to Messages
        <% end %>
      </div>
    </div>
  </div>
</div>
